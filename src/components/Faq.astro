---
const faqData = [
  {
    question: "How does Shoutout work?",
    answer: "After each visit or order, share your private feedback link. Happy customers are invited to share their experience publicly, while unhappy ones can message you privately — giving you a chance to fix issues before they turn into negative public reviews."
  },
  {
    question: "What happens to negative feedback?",
    answer: "Private feedback goes directly to you. It's never published automatically, and you can respond personally to resolve issues and protect your reputation."
  },
  {
    question: "Does Shoutout help with Google or online reviews?",
    answer: "Indirectly. Shoutout makes it easier for satisfied customers to leave public reviews by guiding them to your preferred links. While we can't guarantee results, most businesses see a steady lift in positive feedback over time."
  },
  {
    question: "Is this compliant with Google's review policies?",
    answer: "Yes. Shoutout follows all platform guidelines. We don't filter or block reviews — we simply offer a private feedback channel first, which is fully compliant."
  },
  {
    question: "What platforms does Shoutout support?",
    answer: "Shoutout supports any platform that can be linked to. You can direct customers to Google, Facebook, Instagram, your website, or anywhere else you'd like them to share feedback or follow you."
  },
  {
    question: "Does it need any technical setup?",
    answer: "No. Setup takes just a few minutes. Fill out the Get Shoutout form, and we'll send you a branded, custom feedback link you can start sharing right away — no coding or integrations required."
  },
  {
    question: "Can I try it first?",
    answer: "Yes! We're offering the first 3 months for only $1 total with code SHOUTOUT at checkout. It's a simple, low-risk way to see how Shoutout works for your business. Cancel anytime."
  },
  {
    question: "What types of businesses use Shoutout?",
    answer: "Shoutout is built for any business that serves customers — from cafés, salons, and retail stores to online shops, gyms, and community services. If you value customer feedback or rely on word of mouth, Shoutout works for you."
  }
];
---

<section class="faq-section" id="faq">
    <div class="container">
        <div class="center text-container">
            <h3 class="h1-title">Common Questions</h3>
        </div>

        <div class="row">
            <div class="two columns"></div>
            <div class="eight columns faq-container">
                <div class="faq-list">
                    {faqData.map((item, index) => (
                        <div class="faq-item" key={index}>
                            <button class="faq-question">
                                <span>{item.question}</span>
                                <span class="faq-icon">+</span>
                            </button>
                            <div class="faq-answer">
                                <p>{item.answer}</p>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
            <div class="two columns"></div>
        </div>
    </div>
</section>

<script>
    (function() {
        function initFAQ() {
            const faqButtons = document.querySelectorAll('.faq-question');

            faqButtons.forEach((button, index) => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const faqItem = button.closest('.faq-item');
                    const answer = faqItem.querySelector('.faq-answer');
                    const icon = button.querySelector('.faq-icon');

                    // Close all other items
                    faqButtons.forEach((otherButton, otherIndex) => {
                        if (otherIndex !== index) {
                            const otherItem = otherButton.closest('.faq-item');
                            const otherAnswer = otherItem.querySelector('.faq-answer');
                            const otherIcon = otherButton.querySelector('.faq-icon');
                            otherAnswer.style.maxHeight = '0';
                            otherIcon.textContent = '+';
                        }
                    });

                    // Toggle current item
                    if (answer.style.maxHeight && answer.style.maxHeight !== '0px') {
                        answer.style.maxHeight = '0';
                        icon.textContent = '+';
                    } else {
                        answer.style.maxHeight = answer.scrollHeight + 'px';
                        icon.textContent = '−';
                    }
                });
            });
        }

        // Try multiple events to ensure it runs
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initFAQ);
        } else {
            initFAQ();
        }

        // Also try on Astro page load
        document.addEventListener('astro:page-load', initFAQ);
        document.addEventListener('astro:after-swap', initFAQ);
    })();
</script>

<style lang="scss">
.faq-section{
    background-color: #dfe9f3;

    .text-container{
        margin-top: 0;
        margin-bottom: 40px;
    }

    .row{
        display: flex;
        justify-content: center;
    }

    .faq-container{
        border: 1px solid #dde2e5;
        padding: 30px;
        border-radius: 20px;
        background-color: #fff;
    }
    .faq-list {
        .faq-item {
            border: none;
            padding: 0;
            border-radius: 0;
            border-bottom: 1px solid #dde2e5;
            padding: 20px 0;
            background-color: transparent;

            &:first-child {
                padding-top: 0;
            }

            &:last-child {
                border-bottom: none;
                padding-bottom: 0;
            }
        }
    }

    .faq-question {
        width: 100%;
        background: transparent !important;
        border: none !important;
        text-align: left;
        font-family: 'Manrope', sans-serif;
        font-size: 1.8rem;
        font-weight: 600;
        color: #111;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        padding: 0 !important;
        margin: 0;
        text-decoration: none;
        appearance: none !important;
        -webkit-appearance: none !important;
        -moz-appearance: none !important;
        border-radius: 0 !important;
        box-shadow: none !important;
        outline: none;
        text-transform: none;
        letter-spacing: normal;
        line-height: 1.4;

        &:hover, &:focus, &:active {
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
            color: var(--accent);
            outline: none;
        }

        & span:first-child {
            flex: 1;
            padding-right: 1rem;
        }
    }

    .faq-icon {
        font-size: 2rem;
        font-weight: 400;
        color: #9ba5b9;
        transition: transform 0.2s ease;
        min-width: 30px;
        text-align: right;
        flex-shrink: 0;
        margin-top: 2px;
    }

    .faq-answer {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;

        p {
            margin: 10px 0;
            position: relative;
            padding-left: 0;
            font-size: 1.8rem;
            line-height: 1.6;
            color: #111;
            font-weight: 400;
        }
    }
}
</style>